{% load static sass_tags jsonld %}

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{% sass_src 'coresite/scss/main.scss' %}">
  {% block meta %}{% include 'coresite/partials/seo/meta_head.html' %}{% endblock %}
  {% block head_extras %}{% endblock %}
  {% block structured_data %}
  {% include 'coresite/partials/seo/structured_data.html' %}
{% endblock %}
</head>

<body {% block body_class %}{% endblock %}
      data-analytics-enabled="{{ ANALYTICS_ENABLED|yesno:'true,false' }}"
      data-analytics-provider="{{ ANALYTICS_PROVIDER }}"
      data-analytics-site-id="{{ ANALYTICS_SITE_ID }}"
      data-consent-required="{{ CONSENT_REQUIRED|yesno:'true,false' }}"
      data-consent-granted="{{ CONSENT_GRANTED|yesno:'true,false' }}"
      data-consent-cookie-name="{{ CONSENT_COOKIE_NAME }}"
      data-consent-cookie-max-age="{{ CONSENT_COOKIE_MAX_AGE }}"
      data-consent-cookie-samesite="{{ CONSENT_COOKIE_SAMESITE }}"
      data-consent-cookie-secure="{{ CONSENT_COOKIE_SECURE|yesno:'true,false' }}"
      data-consent-cookie-httponly="{{ CONSENT_COOKIE_HTTPONLY|yesno:'true,false' }}"
      data-consent-token-accept="{{ CONSENT_ACCEPT_TOKEN }}"
      data-consent-token-decline="{{ CONSENT_DECLINE_TOKEN }}">
  <a class="skip-link" href="#main">Skip to content</a>

  {% include 'coresite/partials/consent_banner.html' %}

  {% if ANALYTICS_ENABLED %}
    {% include 'coresite/partials/global/analytics.html' %}
  {% endif %}

  {% include 'coresite/partials/global/build_banner.html' %}

  {% include 'coresite/partials/global/header_nav.html' %}

  <main id="main" tabindex="-1">
    {# Site-wide notice placeholder â€” renders nothing by default #}
    {% include 'coresite/partials/global/notice.html' %}
    {% block content %}{% endblock %}
  </main>

  {% include 'coresite/partials/global/footer.html' %}

  <script src="{% static 'coresite/js/consent.js' %}?v={{ now|date:'U' }}" defer></script>
  <script src="{% static 'coresite/js/main.js' %}?v={{ now|date:'U' }}" defer></script>
  <script>
  (function() {
    if (new URLSearchParams(location.search).get('consent') === 'updated') {
      document.dispatchEvent(new Event('tf:consent-updated'));
    }
  })();
  </script>
  {% block body_scripts %}{% endblock %}
</body>
</html>
