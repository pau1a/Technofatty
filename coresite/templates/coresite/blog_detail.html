{% extends "coresite/base.html" %}
{% load jsonld seo_tags %}

{% block meta %}
  {% with meta_title=post.meta_title meta_description=post.meta_description|default:post.excerpt|default:'A blog post on Technofatty.' og_type='article' og_image_url=post.og_image_url %}
    {% include "coresite/partials/seo/meta_head.html" %}
  {% endwith %}
  {% if post.date %}<meta property="article:published_time" content="{{ post.date|date:'c' }}">{% endif %}
  {% if post.updated %}<meta property="article:modified_time" content="{{ post.updated|date:'c' }}">{% endif %}
{% endblock %}

{% block structured_data %}
  {{ block.super }}
  {% canonical_url canonical_url as resolved_canonical %}
  {% include "coresite/partials/seo/blog_post_jsonld.html" with post=post canonical_url=resolved_canonical %}
{% endblock %}

{% block content %}
  <section class="section section--scaffold" aria-labelledby="{{ page_id }}-heading">
    <div class="wrap">
        <div class="scaffold__body">
          {% include "coresite/partials/global/status_placeholder.html" %}
          <p class="back-link">← Back to Blog</p>
          <h1 id="{{ page_id }}-heading">{{ page_title }}</h1>
          <p class="post-meta">
            <time datetime="{{ post.date|date:'Y-m-d' }}">{{ post.date|date:'d M Y' }}</time> ·
            <a href="{% url 'blog_category' post.category.slug %}">{{ post.category.title }}</a> ·
            {% for tag in post.tags %}<a href="{% url 'blog_tag' tag.slug %}">#{{ tag.title }}</a>{% if not forloop.last %} {% endif %}{% endfor %}
          </p>
          <nav class="post-outline" aria-label="In this post"></nav>
          <article class="post-body"></article>
          <p class="post-taxonomy">Filed under <a href="{% url 'blog_category' post.category.slug %}">{{ post.category.title }}</a> · {% for tag in post.tags %}<a href="{% url 'blog_tag' tag.slug %}">#{{ tag.title }}</a>{% if not forloop.last %} {% endif %}{% endfor %}</p>
        </div>
        {% include "coresite/partials/_related_discussions.html" %}
      </div>
    </section>
  {% endblock %}
