{% extends "coresite/base.html" %}
{% load jsonld %}

{% block structured_data %}{{ block.super }}
  {% if tool %}
  {% jsonld %}
  {
    "@context": "https://schema.org",
    "@type": "{% if tool.schema_kind == 'software' %}SoftwareApplication{% else %}CreativeWork{% endif %}",
    "name": "{{ tool.title|escapejs }}",
    "description": "{{ tool.description|escapejs }}",
    "url": "{{ tool.url|escapejs }}"{% if tool.image %},
    "image": "{{ tool.image|escapejs }}"{% endif %}{% if tool.schema_kind == 'software' %},
    "operatingSystem": "Web"{% endif %}
  }
  {% endjsonld %}
  {% endif %}
{% endblock %}

{% block content %}
  <section class="section section--scaffold" aria-labelledby="{{ page_id }}-heading">
    <div class="wrap">
      <h1 id="{{ page_id }}-heading">{{ page_title }}</h1>
      {% include "coresite/partials/_related_discussions.html" %}
    </div>
  </section>
{% endblock %}

{% block body_scripts %}
  {{ block.super }}
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      if (window.tfSend) {
        window.tfSend('tool_detail.view', { tool: '{{ tool_slug|default:""|escapejs }}' });
      }
    });
  </script>
{% endblock %}
