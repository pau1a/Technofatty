// coresite/static/coresite/scss/sections/_newsletter.scss
// -----------------------------------------------------------------------------
// Token map:
// tech-blue  → c(blue)
// warm-gold  → c(gold) // TODO: confirm CTA variant
// green      → c(green)
// magenta    → c(magenta)
// radius-md  → r(md)
// space-2    → s(2)
// space-3    → s(3)
// space-6    → s(6)
// space-7    → s(7)
// space-8    → s(8)
// bp.md      → mq(md)
// bp.lg      → mq(lg)
// TODO: opacity-low → ?
// -----------------------------------------------------------------------------

// Placeholder for shared form control styles to keep things DRY.
%form-control-shared {
  width: 100%;
  min-height: s(7); // ≥44px for tap targets
  border-radius: r(md);
  @include focus-ring(c(gold));
}

.newsletter-band {
  background: c(bg-accent-light);
  padding-block: map-get($section-pad-y, base);
  @include mq(md){ padding-block: map-get($section-pad-y, md); }
  @include mq(lg){ padding-block: map-get($section-pad-y, lg); }

  .wrap {
    @include container;
    display: flex;
    flex-direction: column;
    gap: s(3); // space-3 inner gaps
  }

  .section-title { color: c(blue); } // tech-blue heading

  p { margin: 0; }

  form {
    display: flex;
    flex-direction: column;
    gap: s(3);
    width: 100%;

    fieldset {
      border: 0;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: s(3);

      label { margin-bottom: 0; }

      input[type="email"] {
        @extend %form-control-shared;
        padding-inline: s(3);
      }

      .btn {
        @extend %form-control-shared;
        // CTA inherits .btn--cta (gold base, blue hover)
      }

      .form-message { min-height: 1em; }
    }

    &.is-error {
      input[type="email"] { border-color: c(magenta); }
      .form-message {
        color: c(magenta);
        margin-top: s(2);
      }
    }

    &.is-success {
      input[type="email"] { border-color: c(green); }
      .form-message {
        color: c(green);
        margin-top: s(2);
      }
    }

    &.is-busy {
      opacity: map-get($opacities, mid);
      pointer-events: none;
    }
  }
}

// Optional decorative motif
// .newsletter-band.has-motif {
//   position: relative;
//   &::before {
//     content: '';
//     position: absolute;
//     inset: 0;
//     background: url('../img/motifs/motif-neuralnet-1.svg') no-repeat center / cover;
//     opacity: map-get($opacities, low);
//     // TODO: prove contrast AA if motif enabled
//   }
// }

/* Checklist:
- no hex or pixel literals; only design tokens and mixins.
- input and button use focus-ring mixin and min-height s(7) for ≥44px tap targets.
 - light accent background with c(bg-accent-light); heading uses c(blue); CTA uses existing .btn-cta.
- inner spacing uses s(6) padding and s(3) gaps.
- layout remains single column at all widths; tested ~360–400px.
- this partial is imported in main.scss under Sections.
 - HTML/JS updated for fieldset semantics and busy state.
*/
